!function(){"use strict";function e(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}var r={name:"Wordpress",root:"rss",item:"item",props:{site:["title","link","description","pubDate","language","wp:wxr_version","wp:base_site_url","wp:base_blog_url","wp:author_email","wp:author_display_name","wp:author_first_name","wp:author_last_name","generator"],posts:["title","link","pubDate","dc:creator","content:encoded","wp:post_date","wp:post_date_gmt","wp:post_name","wp:status"]},map:{title:{mapTo:"title",cdata:!0},pubDate:{mapTo:"pubDate",cdata:!1},"dc:creator":{mapTo:"user",cdata:!0},"content:encoded":{mapTo:"content",cdata:!0},"content:excerpt":{mapTo:"metad",cdata:!0},"wp:post_name":{mapTo:"url",cdata:!0},categories:{mapTo:"meta",cdata:!0},"wp:status":{mapTo:"private"}},mapNM:{title:{mapTo:"title",cdata:!0},pubDate:{mapTo:"date",cdata:!1},"dc:creator":{mapTo:"user",cdata:!0},"content:encoded":{mapTo:"content",cdata:!0},"content:excerpt":{mapTo:"metad",cdata:!0},"wp:post_name":{mapTo:"url",cdata:!0},categories:{mapTo:"tags",cdata:!0}}},d={getOption:function(e){var t,n=document.getElementById(e)?document.getElementById(e):document.getElementsByName(e);if("text"===n.type)t=n.value;else if("checkbox"===n.type)t=n.checked;else if("select"===n.type)t=n.options[n.selectedIndex].value;else if(!n.id)for(var a=0;a<n.length;a++)!0===n[a].checked&&(t=n[a].value);return t},gsXML:function(){this.data={node:"item",children:[{node:"title",cdata:!0},{node:"url",cdata:!0},{node:"pubDate",cdata:!1},{node:"author",cdata:!0},{node:"meta",cdata:!0},{node:"metad",cdata:!0},{node:"menu",cdata:!0},{node:"menuOrder",cdata:!0},{node:"menuStatus",cdata:!0},{node:"template",cdata:!0},{node:"parent",cdata:!0},{node:"content",cdata:!0}]}}};d.gsXML.prototype.set=function(e,t,n){for(var a=0;a<this.data.children.length;a++)this.data.children[a].node===e&&(this.data.children[a][t]=n)},d.cache={get:function(e,t){return t?d.cache[e][t]||!1:d.cache[e]||!1},set:function(e,t){if("string"==typeof e)d.cache[e]=t;else for(var n in e)d.cache[n]=e[n]}},d.cache.set("cms",r),d.view={previewIndex:0,previewMode:"table"},d.view.updateFileInfo=function(){for(var e=[{el:"file-name",data:d.cache.get("fileName"),prefix:"File name:",warn:function(e){return-1===e.indexOf(".xml")}},{el:"file-size",data:d.cache.get("fileSize"),prefix:"File size:"},{el:"file-posts",data:d.cache.get("filePosts"),prefix:"Posts:",warn:function(e){return 1e3<e||"Error"===e}},{el:"file-type",data:d.cache.get("fileType"),prefix:"File type:",warn:function(e){return"text/xml"!==e}}],t=0;t<e.length;t++)document.getElementById(e[t].el).textContent=e[t].prefix+" "+e[t].data,e[t].warn&&e[t].warn(e[t].data)?(document.getElementById(e[t].el).className="uk-alert-danger",document.getElementById(e[t].el).innerHTML='<i class="uk-icon-close"></i>&nbsp;&nbsp;'+document.getElementById(e[t].el).innerHTML):"file-size"!==e[t].el&&(document.getElementById(e[t].el).className="uk-alert-success",document.getElementById(e[t].el).innerHTML='<i class="uk-icon-check"></i>&nbsp;&nbsp;'+document.getElementById(e[t].el).innerHTML)},d.readXml=function(o,e){var t=new FileReader;t.onload=function(e){var t=e.target||e.srcElement,n=(new DOMParser).parseFromString(t.result,"application/xml"),a=d.cache.get("cms");d.cache.set({xml:n,fileSize:Math.floor(o.size/1024,2)+" KB",fileName:o.name,fileType:o.type?o.type:o.name.slice(o.name.lastIndexOf(".")+1)}),d.defineXmlns(),d.extractSiteProps(a.props.site),d.extractPosts(a.item,a.props.posts,a.extractPostProps),d.view.updateFileInfo()},t.readAsText(o)},d.defineXmlns=function(){var e,t,n=d.cache.get("xml").getElementsByTagName(d.cache.get("cms","root"))[0],a={};if(n){for(var o=0;o<n.attributes.length;o++)e=n.attributes[o].nodeName,t=n.attributes[o].nodeValue,-1<e.indexOf("xmlns")&&(a[e.split(":")[1]]=t);d.cache.set("xmlns",a)}},d.getElementsByNameNS=function(e,t){return-1<(t=t).indexOf(":")?(t=t.split(":"),e.getElementsByTagNameNS(d.cache.get("xmlns")[t[0]],t[1])[0]):e.getElementsByTagName(t)[0]},d.extractSiteProps=function(e){for(var t={},n=0;n<e.length;n++)d.getElementsByNameNS(d.cache.xml,e[n])&&(t[e[n]]=d.getElementsByNameNS(d.cache.xml,e[n]).textContent.trim());return d.cache.set("_site",t),t},d.extractPosts=function(e,t,n){for(var a=d.cache.xml.getElementsByTagName(e),o=[],c=0;c<a.length;c++)o.push(n(a[c],t));d.cache.set("__posts",o),d.cache.set("filePosts",a.length?a.length:"Error")},d.extractPostProps=function(e,t){for(var n={},a=0;a<t.length;a++)d.getElementsByNameNS(e,t[a])&&(n[t[a]]=d.getElementsByNameNS(e,t[a]).textContent.trim());return n},d.previewPosts=function(){var e,t,n,a,o,c=document.getElementById("preview"),r=document.createElement("table"),i=d.cache.get("_posts")[d.view.previewIndex];if("view-table"===d.getOption("view-mode"))for(var s in r.className="uk-table uk-table-condensed",i)(e=document.createElement("code")).appendChild(document.createTextNode("<"+s+">")),t=document.createTextNode(i[s]),n=document.createElement("tr"),o=document.createElement("td"),a=document.createElement("td"),o.appendChild(e),a.appendChild(t),n.appendChild(o),n.appendChild(a),r.appendChild(n);else(r=document.createElement("pre")).appendChild(document.createTextNode(d.cache.get("posts")[d.view.previewIndex].xml));c.innerHTML=r.outerHTML},d.generatePostXml=function(e){var t='<?xml version="1.0" encoding="UTF-8"?>',n=d.getOption("pretty-print");n&&(t+="\n"),t+="<"+e.node+">";for(var a=0;a<e.children.length;a++)n&&(t+="\n\t"),t+="<"+e.children[a].node+">"+(e.children[a].cdata?"<![CDATA["+(e.children[a].content?e.children[a].content:"")+"]]>":e.children[a].content?e.children[a].content:"")+"</"+e.children[a].node+">";return n&&(t+="\n"),t+="</"+e.node+">"},d.processPost=function(e,t){var n=e.content,a=/<\/*(section|main|header|footer|aside|nav).*?>/g,o=/<\/*div.*?>/g,c=/\s*class=".*?"/g,r=/\s*id=".*?"/g,i=/<[^\/>][^>]*[^\/]><\/[^>]+>/,s=/&nbsp;/g,l=/\s+/g;return e.content=n.replace(s," "),d.getOption("trim-whitespace")&&(e.content=n.replace(l," ")),"function"==typeof d.cache.cms.processPost&&(e=d.cache.cms.processPost(e)),n=e.content,"none"!==d.getOption("link-handler")&&("root-rel"===d.getOption("link-handler")?n=n.replace(new RegExp(t,"")):"new-link"===d.getOption("link-handler")&&(n=n.replace(new RegExp(t,d.getOption("new-link-url"))))),d.getOption("strip-sections")&&(n=n.replace(a,"")),d.getOption("strip-divs")&&(n=n.replace(o,"")),d.getOption("strip-id")&&(n=n.replace(r,"")),d.getOption("strip-class")&&(n=n.replace(c,"")),d.getOption("strip-empty")&&(n=n.replace(i,"")),e.content=n,e},d.generatePostsOutput=function(e){d.cache.set("_posts",d.cache.get("cms").convertPosts(e));for(var t,n=[],a=(e=e||d.cache.get("_posts"),0);a<e.length;a++){for(var o in t=new d.gsXML,console.log(e[a].metad),e[a])t.set(o,"content",e[a][o]);n.push({json:t.data,xml:d.generatePostXml(t.data)})}return d.cache.set("posts",n),n},r.processPost=function(e){var t=e.content,n=e.metad,a=/<\/*.*?>/g,o=/\[.*?\[\/.*?\]/g,c="\x3c!--more--\x3e";return d.getOption("strip-shortcodes")&&(t=t.replace(o,"")),0<t.indexOf(c)&&(t=t.split(c),d.getOption("set-more-metad")&&(n=t[0].replace(a,"")),t=d.getOption("strip-more-text")?t[1]:t.join(""),d.getOption("strip-more-tag")&&(t=t.replace(c,""))),e.content=t,e.metad=n||"",e},r.extractPostProps=function(e,t){var n=d.extractPostProps.call(null,e,t),a=e.getElementsByTagName("category");n.categories=[];for(var o=0;o<a.length;o++)n.categories.push(a[o].textContent);return n.categories=n.categories.join(", "),n},r.convertPosts=function(e){e=d.cache.get("__posts");for(var t,n=r.map,a=[],o=0;o<e.length;o++){for(var c in a[o]={},e[o])n.hasOwnProperty(c)&&(a[o][n[c].mapTo]=e[o][c]);t=d.processPost(a[o],d.cache.get("_site")["wp:base_site_url"]),a[o].metad=t.metad,a[o].author=a[o].user,a[o].content=t.content,a[o].template=d.getOption("set-tmpl"),a[o].parent=d.getOption("set-parent")}return a},d.bindClick=function(e){var t=e.target||e.srcElement;if("convert-xml"===t.id)d.generatePostsOutput(),d.previewPosts();else if("preview-prev"===t.id||"preview-prev"===t.parentNode.id)d.view.previewIndex=0<d.view.previewIndex-1?d.view.previewIndex-1:0,d.previewPosts();else if("preview-next"===t.id||"preview-next"===t.parentNode.id)d.view.previewIndex=d.view.previewIndex+1<d.cache.get("posts").length?d.view.previewIndex+1:d.view.previewIndex,d.previewPosts();else if("download-zip"===t.id){for(var n,a=d.cache.get("posts"),o=new JSZip,c=0;c<a.length;c++)n=a[c].json.children[1].content+".xml",o.file(n,a[c].xml),console.log(o);var r=o.generate({type:"blob"});saveAs(r,"posts.zip")}},e(document.getElementById("upload-xml"),"change",function(e){var t=e.target||e.srcElement;d.readXml(t.files[0])}),e(document.body,"click",d.bindClick),document.getElementsByName("view-mode")[0].onchange=d.previewPosts,document.getElementsByName("view-mode")[1].onchange=d.previewPosts,document.getElementById("other-settings").innerHTML='<tr><th colspan="2">'+d.cache.get("cms","name")+"</th></tr>"+document.getElementById(d.cache.get("cms").name.toLowerCase()+"-settings").innerHTML}();
//# sourceMappingURL=projects\gs-blog-import\importer.min.js.map