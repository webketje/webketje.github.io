<!DOCTYPE html>
<html>
<head>
<title>2015-04-25-building-a-theme-with-gs-custom-settings-advanced</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<hr />
<p>title: Building a theme with GS Custom Settings - advanced
category: CMS
img: http://i.imgur.com/HzihL7G.png
tags: GetSimple PHP plugin theme
layout: article
published: true
description: Example use cases for the GetSimple KO Site settings plugin
intro: |</p>
<h2>  This article demonstrates the functionality of GS Custom Settings by converting the standard Innovation Theme from Getsimple to an an i18N-enabled custom settings version.</h2>
<p>In this tutorial, we'll be building a theme which will demonstrate all the features in GS Custom Settings, combined with the power of the <a href="">I18n plugin</a>, and 3 different templates: page, blog, and contact. The theme essentially mimics <a href="http://www.toddmotto.com">Todd Motto's Github blog</a>. If you're impatient, or rather learn by looking at the code, you can <a href="">download this theme</a> at the bottom of the article.</p>
<h3>Table of contents</h3>
<ol>
<li><a href="#">Considering the variables in the theme</a></li>
<li><a href="#">Building the site header</a></li>
</ol>
<p>Anyhow, the theme folder will look like this:</p>
<pre>
GSCS-sample-theme/
  ├─ template.php
  ├─ blog.php
  ├─ contact.php
  ├─ functions.php
  ├─ inc/  
  |    ├─ footer.inc.php
  |    ├─ header.inc.php
  |    └─ dynamic_css.inc.php
  ├─ assets/
  |    ├─ favicon.png
  |    ├─ style.css
  |    └─ lib/
  |        ├─ html5shiv.js
  |        ├─ uikit.css
  |        └─ fontawesome.css
  ├─ settings.json
  └─ lang/
     ├─ fr_FR.json
     └─ de_DE.json
</pre>
<p>This tutorial will focus on how to integrate GS Custom Settings in theme development, if you need to get familiar with regular GetSimple theming, read <a href="">the tutorial</a> in the wiki. It's also handy to keep a browser tab open on the <a href="">complete template tags reference</a>. </p>
<h3>Step 1: Considering the <em>variables</em> in the theme</h3>
<p>First we need to consider which settings will be adjustable in the template. For inspiration, you could have a look at <a href="http://scaffold.tumblr.com/options/">Tumblr theme options</a>, ThemeForest Wordpress' <a href="http://i.imgur.com/1kEkKAu.png">Select options</a>, or even <a href="http://2.bp.blogspot.com/-5o8ExgEBbVk/TzYiXNXleDI/AAAAAAAAFig/38Mcn18TVog/s1600/Change%2Bpost%2Btitle%2Bcolor%2Bin%2BBlogger%2Btemplates.png">Blogger template options</a>. Generally, you will want to provide settings in three four different sections: </p>
<ol>
<li><strong>Styling</strong>: Providing users the ability to modify theme colors, fonts and other styles without having to dig into your template, and with the option to change them over time.</li>
<li><strong>Output</strong>: Providing users the ability to place content in fixed theme positions   (like footer content, contact details, etc.) without having to dig into your template.</li>
<li><strong>Data</strong>: Providing users the ability to include/ turn off certain parts of the template, like a social media widget, or whether or not to show the author name under blog posts.</li>
<li><strong>Meta-settings</strong>: Primarily meant for you, the developer, and usually set to <code>locked</code>/<code>hidden</code> in the interface, to facilitate version checking, include credits and links, and fixed information.</li>
</ol>
<p>In our case we will provide the following settings:</p>
<table style="border-collapse: collapse;">
<tbody>
  <tr>
    <td>Setting label</td>
    <td>Setting lookup</td>
    <td>Setting type</td>
    <td>Setting options/ defaults/ details</td>
  </tr>
  <tr><td colspan="4"><strong>Styling</strong></td></tr>
  <tr>
    <td>Headings font</td>
    <td>css_hfont</td>
    <td>select</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Headings text color</td>
    <td>css_hcolor</td>
    <td>color</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Body font</td>
    <td>css_pfont</td>
    <td>select</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Body text color</td>
    <td>css_pcolor</td>
    <td>color</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Link text color</td>
    <td>css_acolor</td>
    <td>color</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Theme style</td>
    <td>css_theme</td>
    <td>radio</td>
    <td>Options: <code>square / circle / rounded</code></td>
  </tr>
  <tr><td colspan="3"><strong>Output</strong></td></tr>
  <tr>
    <td>Name</td>
    <td>contact_name</td>
    <td>text</td>
    <td></td>
  </tr>
  <tr>
    <td>E-mail</td>
    <td>contact_email</td>
    <td>text</td>
    <td></td>
  </tr>
  <tr>
    <td>Phone/ Fax</td>
    <td>contact_phone</td>
    <td>textarea</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Address</td>
    <td>contact_addr</td>
    <td>textarea</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Headline</td>
    <td>profile_h</td>
    <td>text</td>
    <td>Default: Hi, I'm &lt;a href="http://twitter.com/tyblitz">@Tyblitz&lt;/a>!</td>
  </tr>
  <tr>
    <td>Lead paragraph</td>
    <td>profile_desc</td>
    <td>textarea</td>
    <td>Default: Developer behind GS Custom Settings & tons of useless code. 23, based in Belgium, communications agent and all-things-web enthusiast.</td>
  </tr>
  <tr>
    <td>Profile image</td>
    <td>profile_img</td>
    <td>image</td>
    <td>Default: https://s3.amazonaws.com/uifaces/<br>faces/twitter/mantia/128.jpg</td>
  </tr>
  <tr><td colspan="4"><strong>Data</strong></td></tr>
  <tr>
    <td>Blog-post meta keyword</td>
    <td><code>blog_keyword</code></td>
    <td>text</td>
    <td>Default: <code>_blog</code></td>
  </tr>
  <tr>
    <td>Blog-post date format</td>
    <td><code>blog_date</code></td>
    <td>select</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Blog-post excerpt length</td>
    <td><code>blog_ex_len</code></td>
    <td>text</td>
    <td>0 = no post-excerpt, 'full' = full post in blog-roll</td>
  </tr>
  <tr>
    <td>Link on blog-post title?</td>
    <td><code>blog_show_link</code></td>
    <td>checkbox</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Show blogpost tags?</td>
    <td><code>blog_show_tags</code></td>
    <td>checkbox</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Show featured image?</td>
    <td><code>blog_show_img</code></td>
    <td>checkbox</td>
    <td>/</td>
  </tr>
  <tr>
    <td># of blog-posts/page</td>
    <td><code>blog_list_len</code></td>
    <td>text</td>
    <td>Default: 10</td>
  </tr>
  <tr>
    <td>Blog is homepage?</td>
    <td><code>blog_home</code></td>
    <td>checkbox</td>
    <td>/</td>
  </tr>
  <tr>
    <td>Disqus username</td>
    <td><code>data_disqus</code></td>
    <td>text</td>
    <td>Leave empty to disable</td>
  </tr>
  <tr>
    <td>Google Analytics</td>
    <td><code>data_ga</code></td>
    <td>text</td>
    <td>Leave empty to disable</td>
  </tr>
  <tr>
    <td>Social Profile 1</td>
    <td><code>social_1</code></td>
    <td>text</td>
    <td>Leave empty to disable</td>
  </tr>
  <tr>
    <td>Social Profile 2</td>
    <td><code>social_2</code></td>
    <td>text</td>
    <td>Leave empty to disable</td>
  </tr>
  <tr>
    <td>Social Profile 3</td>
    <td><code>social_3</code></td>
    <td>text</td>
    <td>Leave empty to disable</td>
  </tr>
  <tr><td colspan="4"><strong>Meta-settings</strong></td></tr>
  <tr>
    <td>Theme Version</td>
    <td><code>meta_version</code></td>
    <td>text</td>
    <td>Access: locked</td>
  </tr>
  <tr>
    <td>Theme Link</td>
    <td><code>meta_url</code></td>
    <td>text</td>
    <td>Access: locked</td>
  </tr>
  <tr>
    <td>Author</td>
    <td><code>author</code></td>
    <td>text</td>
    <td>Access: locked</td>
  </tr>
  <tr>
    <td>Author URL</td>
    <td><code>author_url</code></td>
    <td>text</td>
    <td>Access: locked</td>
  </tr>
</tbody>
</table>
<h3>Step 1: Building the site header (header.inc.php)</h3>
<p>As with all GetSimple theme files, first include the following statement to prevent direct file access:</p>
<pre>&lt;?php if(!defined('IN_GS')){ die('you cannot load this page directly.'); } ?&gt;</pre>
<p>The <code>&lt;head&gt;</code> tag is pretty straightforward too, nothing different from regular GS theming:</p>
<pre>
  &lt;title&gt;&lt;?php get_page_clean_title(); ?&gt; - &lt;?php get_site_name(); ?&gt;&lt;/title&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;meta name=&quot;description&quot; content=&quot;&lt;?php get_page_meta_desc(); ?&gt;&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;?php get_theme_url(); ?&gt;/res/font-awesome.min.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;?php get_theme_url(); ?&gt;/res/style.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;?php get_theme_url(); ?&gt;/res/uikit.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href='http://fonts.googleapis.com/css?family=Open+Sans'&gt;
  &lt;script src=&quot;&lt;?php get_theme_url(); ?&gt;/res/html5shiv.min.js&quot;&gt;&lt;/script&gt;</pre>
<h4>Checking settings for <em>falsey</em> values</h4>
<h5>Loose checking</h5>
<p>We provide an option in the theme to show or hide the blog page's title (when it's the homepage it should be hidden). The setting <code>blog_show_title</code> is of type <code>checkbox</code> and so returns <code>true</code> or <code>false</code> and can be simply checked for by doing the following:</p>
<pre>&lt;?php if (return_setting('theme', 'blog_show_title')) { ?>
    &lt;h1> &lt;?php get_setting('theme', 'blog_show_title'); ?> &lt;/h1>
&lt;?php } ?> </pre>
<p>But there are also some settings with the <code>text</code>/ <code>textarea</code> type that you want to output only if they have an actual value, like the Disqus or Google Analytics Javascript. Instead of making new checkbox settings, you can check if text fields are <em>non-empty</em> by using the exact same method as for checkboxes. The <code>if</code> clause evaluates to <code>false</code> if the field's value contains 0 characters.</p>
<pre>&lt;?php if (return_setting('theme', 'data_disqus')) { ?>
  &lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    var disqus_shortname = '&lt;?php get_setting('theme', 'data_disqus'); ?>';
    (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] ||
     document.getElementsByTagName('body')[0]).appendChild(dsq); })();
  &lt;/script&gt;
  &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;https://disqus.com/?ref_noscript&quot; rel=&quot;nofollow&quot;&gt;comments.&lt;/a&gt;&lt;/noscript&gt;
&lt;?php } ?> </pre> 
<p>With <em>option</em> settings like <code>radio</code> or <code>select</code>, you should be careful with <code>if</code> clauses: if the first option is selected (index=0), doing <code>if (return_setting('theme','options'))</code> will be <code>false</code>. Only use this if the first option <em>means</em> <code>false</code>, eg: show social buttons options: (0) 'none', (1) 'three', (2) 'five'.</p>
<h3>Building the blog</h3>
<p>For the blog, we add a function in the <code>functions.php</code> file because it uses <code>i18n</code> plugin functions. Because we want to be able to configure the output, we need to use <code>return_i18n_search_results</code> (see the <a href="">details</a>) and not the display function. The <code>i18n</code> plugin makes available a global variable <code>$language</code> on the page which holds the language for the current page.</p>
<pre>function gscs_get_blog($start, $end=1) { 
  global $language;
  $srch = return_i18n_search_results('blogpost', null, $start, $end, 'date', $language);
  
  $show_categories = return_setting('theme', 'blog_show_cat');
  $show_images = return_setting('theme', 'blog_show_img');
  $show_tags = return_setting('theme', 'blog_show_tags');
  $show_permalink = return_setting('theme', 'blog_show_permalink');
  $excerpt_length = return_setting('theme','blog_excerpt_length');
  $date_format = return_setting('theme','blog_date_format');
  
  foreach($srch['results'] as $item) {
  ?&gt;
  &lt;li class=&quot;uk-article&quot;&gt;
    &lt;h3 class=&quot;uk-article-title&quot;&gt;&lt;?php if (!$show_permalink) get_i18n_link($item-&gt;id); else echo $item-&gt;title; ?&gt;&lt;/h3&gt;
    &lt;div class=&quot;post-meta uk-article-meta&quot;&gt;
      &lt;time datetime=&quot;&lt;?php echo date('F jS, Y' , $item-&gt;pubDate); ?&gt;&quot;&gt;&lt;?php echo date('F jS, Y' , $item-&gt;pubDate); ?&gt;&lt;/time&gt;
    &lt;/div&gt;
    &lt;?php if ($show_images) { ?&gt;
      &lt;img src=&quot;http://placehold.it/192x128&quot;&gt;
    &lt;?php } 
    if ($excerpt_length)
      echo '&lt;p class=&quot;uk-article-lead&quot;&gt;' . substr(strip_tags($item-&gt;content), 0, 50) . '&lt;/p&gt;';
    if ($show_tags) { ?&gt;
    &lt;ul class=&quot;tags&quot;&gt;
      &lt;?php foreach ($item-&gt;tags as $tag)
        echo '&lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;uk-badge&quot;&gt;' . $tag . '&lt;/a&gt;&lt;/li&gt;';
      ?&gt;
    &lt;/ul&gt;
    &lt;?php } ?&gt;
  &lt;/li&gt;
  &lt;?php }
}
</pre>
<h3>Further techniques</h3>
<p>Sometimes you might want to have key-value pairs, like for the blog's date format. In the UI you want to display date formats as human-readable, like so: <em>20/02/2015</em>, or <em>April 20, 2015</em>. But PHP only understands formats as listed <a href="http://php.net/manual/en/function.date.php">in the docs</a>. Given the setting <code>blog_date_format</code>, the 2 previou In that case you have 2 options: </p>
<ol>
<li>You map the options to other </li>
</ol>
<h3>Contents</h3>
<ol>
<li>
<a href="#preface">Preface</a>
<ol>
<li><a href="#best-practices">Best practices</a></li>
<li><a href="#php-you-should-know">Some PHP you should know</a></li>
<li><a href="#considering-theme-variables">Considering the theme variables</a></li>
</ol>
</li>
<li>
<a href="#basic">Basic</a>
<ol>
<li><a href="#outputting-text-and-html-content">Output: text and HTML content</a></li>
<li><a href="#show-hiding-content">Output: Show-/hiding content</a></li>
<li><a href="#allowing-custom-css">Styling: Allowing custom CSS</a></li>
<li><a href="#tweak-fonts-and-colors">Styling: Tweakable fonts and colors</a></li>
<li><a href="#tweak-fonts-and-colors">Styling: Multiple options</a></li>
<li><a href="#theme-and-author-data">Meta: Setting theme &amp; author data</a></li>
</ol>
</li>
<li>
<a href="#intermediate">Intermediate</a>
<ol>
<li><a href="#third-party-services">Data: Enabling third party services</a></li>
<li><a href="#google-web-fonts">Styling: Google web fonts</a></li>
<li><a href="#third-party-embeds">Output: third party embeds</a></li>
<li><a href="#social-media-links">Output: social media icon links collection</a></li>
<li><a href="#key-value-pairs">Meta: date format - hidden settings for key-value pairs</a></li>
</ol>
</li>
<li>
<a href="#advanced">Advanced</a>
<ol>
<li><a href="#build-a-mail-form">Building a mail form</a></li>
<li><a href="#integrate-with-other-plugins">Integrating with other GS plugins</a></li>
<li><a href="#build-a-blog">Building a configurable blog</a></li>
</ol>
</li>
</ol>
<h3>Preface</h3>
<h4>Best practices</h4>
<h5>Themes with GS Custom Settings</h5>
<p>If you use GS Custom Settings for a theme, make sure to mention in the theme description in the <a href="http://get-simple.info/extend/">GS Extend repo</a> that your theme <em>requires</em> installing the Custom settings plugin first, or wrap the entire HTML in an <code>if</code> clause, and output a message <em>'This theme requires GS Custom Settings to work'</em>, else you will get a lot of <em>undefined function</em> errors. Here's a sample snippet that you can directly copy paste in your theme's Extend description:</p>
<pre>This theme requires [GS Custom Settings](http://get-simple.info/extend/plugin/gs-custom-settings/913/).</pre> <p>and one for in the forum threads:</p>
<pre>This theme requires [url=http://get-simple.info/extend/plugin/gs-custom-settings/913/]GS Custom Settings[/url].</pre>
<h5>Empty text settings</h5>
<p>Often you need to check whether a setting is valid. When the only check you need is whether a text setting is empty, you can avoid creating a checkbox to 'enable' the setting (eg. a social media link) by  checking the string length of the setting's value. When it is an empty string, its length is 0, so PHP will evaluate to <code>false</code> when you call <code>return_setting('theme', 'myTextSetting')</code>. In the setting's description, simply write something like <em>&quot;Leave empty to disable&quot;</em>. For example, the <code>text</code> setting <code>social_fb</code> could be outputted as follows:</p>
<pre>&lt;?php if (return_setting('theme', 'social_fb'))
   echo '&lt;a href="' . return_setting('theme', 'social_fb') . '>&lt;i class="fa fa-facebook'>&lt;/i>&lt;/a>; ?>
</pre>
<h5>Using <code>for</code> loops</h5>
<p>If you're using setting output in PHP <code>for</code> or <code>foreach</code> loops, it is wisest to put them in a PHP variable before the loop. Although calls to <code>return/get_setting</code> are not very expensive, it does save some performance.</p>
<pre>&lt;?php $show_img = return_setting('theme', 'blog_show_img'); 
 foreach ($items as $item) {
 echo '&lt;div class="post">' . ($show_img ? '&lt;img src="">' : '') . '&lt;/div>'; ?>
</pre>
<h6>Easily accessing a group of settings</h6>
<p>If you need to access many settings (more than 5) in one particular place in your theme, <em>from v0.4 onwards</em> you can use <code>return_setting_group</code> to return an entire group of settings as a PHP array. For the function to work, you should prefix the setting lookups with a common name, followed by an underscore (<code>_</code>); eg. for all profile-related settings, you could have: <code>profile_h</code> for the headline, <code>profile_desc</code> for the description and <code>profile_name</code> for the name. You can then access the returned settings <em>without the prefix</em>. In PHP you could simply do: </p>
<pre>&lt;?php $profile = return_setting_group('theme', 'profile'); 
 echo '&lt;h1>' . $profile['name'] . '&lt;h1>';
 echo '&lt;h3>' . $profile['h'] . '&lt;/h3>';
 echo '&lt;p>' . $profile['desc'] . '&lt;/p>'; ?>
</pre>
<h3>Some PHP you should know</h3>
<p>As soon as you need to do some more advanced stuff (like in the sections Intermediate and Advanced), you will sometimes need to pre-process the output of a setting. In that case, some of the most useful PHP functions to know are:</p>
<ul>
<li><code>echo($string)</code> - Outputs the given string.</li>
<li><code>strip_tags($string)</code> - Removes HTML tags from the string.Handy for example if you want to use HTML in the profile description on the page, and use the same setting for social media/ meta descriptions but without HTML.</li>
<li><code>explode($delimiter, $string)</code> - Splits a string into an array on <code>$delimiter</code>. Useful if you want to re-use and pre-process settings with options or fixed formats.</li>
<li><code>str_replace($search, $replacement, $string)</code></li>
<li><code>strlen($string)</code> - Returns the length of a string. Useful for checking purposes.</li>
<li><code>date($format[, $timestamp])</code> - Returns a date in the specified <code>$format</code>. Useful for blog posts/ footer copyright/ event dates.</li>
<li><code>substr($string, $start, $length)</code> - Subtracts a part of a string starting at <code>$start</code> and ending at <code>$start + $length</code>. Useful for eg. post excerpts</li>
</ul>
<p><a name="outputting-text-and-html-content"></a></p>
<h3>Outputting text and HTML content</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Name</td>
    <td><code>contact_name</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Email</td>
    <td><code>contact_email</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Address</td>
    <td><code>contact_address</code></td>
    <td><code>textarea</code></td>
  </tr>
  <tr>
    <td>Fax/ Phone</td>
    <td><code>contact_phone</code></td>
    <td><code>textarea</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Outputting content is the most basic functionality of GS Custom Settings. In the example below we output the values of the settings <code>email</code>, <code>phone</code> and <code>address</code> to the <code>contact.php</code> template. The settings are preceded by a FontAwesome icon. Note that if you want <code>textarea</code> settings to preserve multiple lines, you will have to set the CSS <code>white-space</code> property to <code>pre/ pre-wrap/ pre-line</code>.</p>
<pre>&lt;address&gt;
  &lt;div&gt;&lt;p style=&quot;white-space: pre;&quot;&gt;
    &lt;i class=&quot;fa fa-fw fa-lg fa-map-marker&quot;&gt;&lt;/i&gt;&lt;?php get_setting('theme', 'contact_address'); ?&gt;
  &lt;/p&gt;&lt;/div&gt;
  &lt;div&gt;&lt;p&gt;
    &lt;i class=&quot;fa fa-fw fa-lg fa-at&quot;&gt;&lt;/i&gt;&lt;?php get_setting('theme', 'contact_email'); ?&gt;
  &lt;/p&gt;&lt;/div&gt;
  &lt;div&gt;&lt;p style=&quot;white-space: pre;&quot;&gt;
    &lt;i class=&quot;fa fa-fw fa-lg fa-phone&quot;&gt;&lt;/i&gt;&lt;?php get_setting('theme', 'contact_phone'); ?&gt;
  &lt;/p&gt;&lt;/div&gt;
&lt;/address&gt;</pre><p>Another popular example is outputting a copyright notice in the theme footer:</p>
<pre>&lt;footer id="site-footer">&amp;copy;
  &lt;?php echo date('Y');?> &lt;?php get_setting('theme', 'contact_name'); ?>
&lt;/footer></pre>
<p>You may also want to let the user decide which HTML content should be outputted, for example to <strong>highlight</strong> a part of the phrase, or to customize, eg sidebar widget content. The <code>textarea</code> or <code>text</code> settings may contain HTML. As such, if you had a  <code>textarea</code> setting <code>sidebar_html</code>, you could do the following:</p>
<pre>&lt;aside>&lt;?php get_setting('theme', 'sidebar_html'); ?>&lt;/aside></pre>
<h3>Show-/hiding content</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Show title on blog page?</td>
    <td><code>blog_show_title</code></td>
    <td><code>checkbox</code></td>
  </tr>
  <tr>
    <td>Profile image</td>
    <td><code>profile_img</code></td>
    <td><code>image</code></td>
  </tr>
  <tr>
    <td>Lead paragraph</td>
    <td><code>profile_desc</code></td>
    <td><code>textarea</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Conditionally showing content is pretty easy, the checkbox setting will either return <code>true</code> or <code>false</code>. The snippet below shows/hides the title of pages using the template <code>blog.php</code>. Useful as you would usually not display the title when the blog is also the homepage. </p>
<pre>if (return_setting('theme', 'blog_show_title')) { ?&gt;
  &lt;h1&gt;&lt;?php get_page_title(); ?&gt;&lt;/h1&gt;
&lt;?php } ?&gt;</pre><p>You may also want to hide output when a <code>textarea/text/image</code> setting is <em>not set</em> (when the value is an empty string). 
If the setting has no container element, you can simply call <code>get_setting</code> and an empty string will be outputted (<em>note: with v0.3 the image setting will return an image with a broken link if you do this</em>).</p>
<pre>&lt;?php get_setting('theme', 'profile_desc'); ?>
&lt;?php get_setting('theme', 'profile_img'); ?></pre>
<p>If the setting output does have a container element, you need to check whether it is non-empty with <code>return_setting</code>:</p>
<pre>&lt;?php if (return_setting('theme', 'profile_img')) { ?>
  &lt;div id="profile-img">&lt;?php get_setting('theme', 'profile_img'); ?>&lt;div>
&lt;?php } ?></pre>
<h3>Styling: allowing custom CSS</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Custom CSS</td>
    <td><code>css_custom</code></td>
    <td><code>textarea</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Custom CSS is the easiest way to provide users a way to change the visual style without touching the template, but of course it requires them to go look for classes and id's in the browser, and at least have a basic understanding of CSS, so not very user-friendly. You should output this setting <em>at the end of your dynamic CSS</em>, so that if the user makes a syntax error nothing else gets lost. </p>
<pre>&lt;style>
 /* other style rules */
 &lt;?php get_setting('theme', 'custom_css'); ?>
&lt;/style>
</pre>
<h3>Styling: Tweakable fonts and colors</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Theme color 1</td>
    <td><code>css_pri_color</code></td>
    <td><code>color</code></td>
  </tr>
  <tr>
    <td>Theme color 2</td>
    <td><code>css_sec_color</code></td>
    <td><code>color</code></td>
  </tr>
  <tr>
    <td>Headings font</td>
    <td><code>css_hfont</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Headings text color</td>
    <td><code>css_hcolor</code></td>
    <td><code>color</code></td>
  </tr>
  <tr>
    <td>Body font</td>
    <td><code>css_pfont</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Body text color</td>
    <td><code>css_pcolor</code></td>
    <td><code>color</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>The colors take any valid CSS colors (color name, HEX, RGB, HSL or RGBA). You would keep all fixed CSS in a separate stylesheet <code>style.css</code>, and include the changeable CSS in your <code>header.inc.php</code> or <code>dynamic_css.inc.php</code> or something alike in a <code>&lt;style&gt;</code> tag. Below is an example of how you would output dynamic styling options into your theme: </p>
<pre>&lt;style&gt;
  h1,h2,h3,h4,h5,h6, #site-nav a {
    color: &lt;?php get_setting('theme', 'css_hcolor'); ?&gt;; 
    font-family: &lt;?php get_setting('theme', 'css_hfont'); ?&gt;; 
  }
  body, body p, body ul, body ol, body blockquote { 
    color: &lt;?php get_setting('theme', 'css_pcolor'); ?&gt;; 
    font-family: &lt;?php get_setting('theme', 'css_pfont'); ?&gt;; 
  }
  #profile-social a, #blog-roll .tags li a, .tags li div {
    background-color:  &lt;?php get_setting('theme', 'css_pri_color'); ?&gt;;
  }
  #profile-social a:hover, #profile-social a:active { 
    background-color:  &lt;?php get_setting('theme', 'css_sec_color'); ?&gt;; 
  }
  a, a:link, a:visited, #site-nav a, #site-nav a:visited, #blog-roll h3 a  { 
    color: &lt;?php get_setting('theme', 'css_pri_color'); ?&gt;;  
  }
  a:active, a:hover, #site-nav a:hover, #site-nav a:active, 
  #blog-roll h3 a:hover, #blog-roll h3 a:active { 
    color: &lt;?php get_setting('theme', 'css_sec_color'); ?&gt;; 
  }
  &lt;?php get_setting('theme', 'custom_css'); ?&gt;
&lt;/style&gt;</pre>
<h3>Styling: multiple options</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Theme style</td>
    <td><code>css_theme</code></td>
    <td><code>radio</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>You can provide customization through fixed options, with the <code>radio</code> or <code>select</code> type.
The <code>radio</code> setting <code>css_theme</code> has 3 options: square, rounded or circle. In our <code>style.css</code> stylesheet, the following rules could be defined (none for square, that is default): </p>
<pre>.circle #profile-image img, .circle #profile-social a { 
  -moz-border-radius: 50%;
  -o-border-radius: 50%;
  -webkit-border-radius: 50%;
  -ms-border-radius: 50%;
  border-radius: 50%;
  overflow: hidden;
}
.rounded #profile-image img, .rounded #profile-social a, .rounded .post-meta img, #main img { 
  -moz-border-radius: 5px;
  -o-border-radius: 5px;
  -webkit-border-radius: 5px;
  -ms-border-radius: 5px;
  border-radius: 5px;
  overflow: hidden;
}
</pre>
<p>In the theme we set a variable class on the <code>&lt;body&gt;</code> tag:</p>
<pre>&lt;body class="&lt;?php get&#95;setting('theme', 'css_theme');?>"></pre>
<p>Similarly, if you had a setting <code>profile_img_size</code> with 3 options: small, normal, big; you could set the size of the profile image only:</p>
<pre>&lt;style>
  #profile-image.big img { height: 160px;}
  #profile-image.normal img, #profile-image img { height: 128px;}
  #profile-image.small img { height: 96px; }
&lt;/style>
&lt;div class="&lt;?php get&#95;setting('theme', 'profile_img_size');?>">&lt;img src="/my/image.jpeg">&lt;/div>
</pre>
<h3>Styling options</h3>
<p>For our theme we have a total of 8 styling options. The font <code>&lt;select&gt;</code>'s offer a choice between +- 20 different fonts, including a couple from Google fonts. <strong>Custom CSS</strong> allows non-technical users to add some CSS rules to the theme (this is a popular setting in Wordpress).</p>
<h5>Fonts and webfonts</h5>
<p>If you limit your font options to te <a href="">websafe fonts</a>, adding 2 extra <code>font-family</code> lines to the dynamic CSS like below will suffice. Generally this should also be fine if you included custom fonts in your CSS with <code>@font-face</code>
<img src="../assets/posts/gscs_advanced_theming/themetut_font_options.png"></p>
<pre>
h1,h2,h3,h4,h5,h6, #site-nav a {
  color: &lt;?php get_setting('theme', 'css_hcolor'); ?&gt;; 
  font-family: &lt;?php get_setting('theme', 'css_hfont'); ?&gt;; 
}
body, body p, body ul, body ol, body blockquote { 
  color: &lt;?php get_setting('theme', 'css_pcolor'); ?&gt;; 
  font-family: &lt;?php get_setting('theme', 'css_pfont'); ?&gt;; 
}
</pre>
<h3>Meta: Setting theme &amp; author data</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
    <th>Access</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Theme version</td>
    <td><code>version</code></td>
    <td><code>text</code></td>
    <td>Locked</td>
  </tr>
  <tr>
    <td>Theme link</td>
    <td><code>url</code></td>
    <td><code>text</code></td>
    <td>Locked</td>
  </tr>
  <tr>
    <td>Extend ID</td>
    <td><code>extend_id</code></td>
    <td><code>text</code></td>
    <td>Locked</td>
  </tr>
  <tr>
    <td>Author</td>
    <td><code>author</code></td>
    <td><code>text</code></td>
    <td>Locked</td>
  </tr>
  <tr>
    <td>Author URL</td>
    <td><code>author_url</code></td>
    <td><code>text</code></td>
    <td>Locked</td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Theme and author info typically are not customizable and with GS Custom Settings you can (if you wish) easily keep track of them by creating some settings. If you wish to display them for users, set the settings' access to <em>Locked</em>. If you rather hide them, set them to <em>Hidden</em>. The <code>extend_id</code> setting <strong>might become important in the future for automatic theme update notifications in the UI</strong>. </p>
<p>You might also want to output some of these settings, for example in the site footer:</p>
<pre>&lt;footer id="site-footer">&amp;copy;
  &lt;?php echo date('Y');?> &lt;?php get_setting('theme', 'contact_name'); ?>
  Theme &lt;a href="&lt;?php get_setting('theme','url'); ?>">My theme&lt;/a> 
  v.&lt;?php get_setting('theme','version'); ?>by 
  &lt;a href=&quot;&lt;?php get_setting('theme', 'author_url');?&gt;&quot;&gt;&lt;?php get_setting('theme', 'author'); ?&gt;&lt;/a&gt;
&lt;/footer></pre>
<h3>Styling: Enabling Google Webfonts</h3>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Headings font</td>
    <td><code>css_hfont</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Body font</td>
    <td><code>css_pfont</code></td>
    <td><code>select</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>But you could also give your users some more options by providing <em>Google Webfonts</em>, and we need to add a couple of extra lines of code to the <code>head.inc.php</code> file (above the <code>&lt;style&gt;</code> tag) to include them <strong>only if</strong> the user has selected one because they impact loading times negatively. For this purpose, we need to slightly <strong>preprocess</strong> them with PHP. Google expects an API call like this:</p>
<pre>
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://fonts.googleapis.com/css?family=font+name">
</pre>
<p>We only want the first font in the option, and we need to replace space characters with <code>+</code>, It is good to know the following 2 PHP functions:</p>
<ul>
<li><a href="http://php.net/manual/en/function.explode.php"><code>explode($delimiter, $string)</code></a></li>
<li><a href="http://php.net/manual/en/function.str-replace.php"><code>str_replace($search, $replacement, $string)</code></a></li>
</ul>
<p>In the code below, we <em>(1)</em> create 2 PHP vars <code>$t_hfont</code> (headings font) and <code>$t_pfont</code> (paragraph font), <em>(2)</em> get the setting with a call to <code>get_setting</code> and the third parameter as <code>FALSE</code> to output the <em>display value</em> of a setting (if you did <code>return_setting</code> you would get a number, because the raw value of option settings is the index of the selected option).. <em>(3)</em> With <code>explode</code> we split the string into an array, then in that string <em>(4)</em> we replace space characters with a <strong>+</strong> via <code>str_replace</code>. </p>
<p>Finally, because the first 13 options are <em>not</em> Google fonts,  we check with <code>return_setting</code> if the <em>raw</em> value of the font settings is higher than 13, and only include it then.</p>
<pre>
&lt;?php 
$t_hfont = get_setting('theme', 'css_hfont', false);
$t_hfont = explode(', ', $t_hfont);
$t_hfont = str_replace(' ', '+', $t_hfont[0]);
$t_pfont = get_setting('theme', 'css_pfont', false);
$t_pfont = explode(', ', $t_pfont);
$t_pfont = str_replace(' ', '+', $t_pfont[0]);

if (return_setting('theme', 'css_hfont') &gt; 13) { ?&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; 
      href=&quot;http://fonts.googleapis.com/css?family=&lt;?php echo $t_hfont;?&gt;&quot;&gt;
&lt;?php } if (return_setting('theme', 'css_pfont') &gt; 13) { ?&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; 
      href=&quot;http://fonts.googleapis.com/css?family=&lt;?php echo $t_pfont;?&gt;&quot;&gt;
&lt;?php } ?&gt;</pre>
<h3>Third party embeds (maps, social feeds,..)</h3>
<p>This setup will enable the user to:</p>
<ul>
<li>embed a Twitter profile feed from the UI</li>
<li>embed a static Google Map with basic options from the UI</li>
</ul>
<p>social feeds, Google Drive documents.)</p>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Twitter feed</td>
    <td><code>twttr_fd</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Twitter widget ID</td>
    <td><code>twttr_id</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Google Map on contact page?</td>
    <td><code>gmap_on</code></td>
    <td><code>checkbox</code></td>
  </tr>
  <tr>
    <td>Google Map size</td>
    <td><code>gmap_size</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Google Map zoom</td>
    <td><code>gmap_zoom</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Address</td>
    <td><code>contact_address</code></td>
    <td><code>textarea</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Embedding a Twitter feed is as simple as copy pasting the code from the <a href="">dev guide</a> and replacing the feed name. Also don't forget to put a surrounding <code>if</code> clause to test if the settings are not empty to avoid JS errors. To be able to use the feed, the user needs to create a 'widget' in his Twitter account for a certain profile, and copy paste the widget's ID and the feed's name into GS Custom Settings.</p>
<pre>&lt;?php if (return_setting('theme', 'twttr_fd') && return_setting('theme', 'twttr_id')) { ?>
&lt;a class=&quot;twitter-timeline&quot; 
   href=&quot;https://twitter.com/&lt;?php get_setting('theme', 'data_twttr_fd'); ?>&quot;
   data-widget-id=&quot;&lt;?php get_setting('theme', 'data_twttr_id'); ?>&quot;&gt;
Tweets by @&lt;?php get_setting('theme', 'data_twttr_fd'); ?>&lt;/a&gt;
&lt;script&gt;
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';
  if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+&quot;://platform.twitter.com/widgets.js&quot;;
  fjs.parentNode.insertBefore(js,fjs);}}(document,&quot;script&quot;,&quot;twitter-wjs&quot;);
&lt;/script&gt;&lt;?php } ?></pre>
<p>For the Google Map we will re-use the <code>contact_address</code> setting from our theme. Suppose the site owner is Google UK. Their address is entered as:</p>
<pre>Google UK, 
Belgrave House, 
76 Buckingham Palace Road, 
London
</pre>
<p>To understand this part, read up on the <a href="https://developers.google.com/maps/documentation/staticmaps/">Google Maps Static API</a>. The output is served as image data, so we need an image tag, and a safe URL which we obtain through PHP's <code>url_encode</code>. The Static Maps API takes a couple of parameters for customization; here I will only include 3: the location, zoom level, and image size. Zoom levels are between 0 and 21, and image size is in the format <code>wxh</code>, as in <code>100x100</code> (these details can be explained in the setting description).</p>
<pre>&lt;?php $gmap = return_setting_group('theme', 'gmap');
if ($gmap['on']) {
   $gmap_url = 'size=' . $gmap['size'] . '&zoom=' . $gmap['zoom'] . '&markers=color:red%7C';
   $gmap_url .= urlencode(return_setting('theme', 'contact_address')); ?>
&lt;img src="https://maps.googleapis.com/maps/api/staticmap? &lt;?php echo $gmap_url; ?>">
&lt;?php } ?></pre>
<h3>Third party services (analytics, comments,..)</h3>
<p>The following code allows the user to:</p>
<ul>
<li>Set Google Analytics (both classic and universal account types) from the UI with the GA ID.</li>
<li>Set the Disqus comment system on blog pages.</li>
</ul>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Google Analytics ID</td>
    <td><code>data_ga</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Disqus username</td>
    <td><code>data_disqus</code></td>
    <td><code>text</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>Many third-party services (like mail forms, analytics trackers, comment systems) can be embedded via a Javascript API on the page. For this example, we will add <a href="http://analytics.google.com">Google Analytics</a> and the popular <a href="">Disqus comment system</a> to blog pages only. First copy paste the tracker codes: Google Analytics <a href="https://developers.google.com/analytics/devguides/collection/web/">has 2</a>. Instead of having another checkbox for the user to set, we can check it in the code because the tracking codes for universal and classic analytics are different.</p>
<pre>&lt;?php if (return_setting('theme', 'data_ga')) { ?>
&lt;script type=&quot;text/javascript&quot;&gt;
  &lt;?php $ga_method = explode('-', return_setting('theme', 'data_ga')); 
  $ga_method = strlen($ga_method[1]) === 4 ? 'uni' : 'classic';
  if ($ga_method === 'classic') { ?&gt;

  var _gaq = _gaq || []; 
  _gaq.push(['_setAccount', '&lt;?php get_setting('theme','data_ga'); ?&gt;']); 
  _gaq.push(['_trackPageview']);
  (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();

  &lt;?php } elseif ($ga_method === 'uni') { ?&gt;

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '&lt;?php get_setting('theme', 'data_ga'); ?&gt;', 'auto');
  ga('send', 'pageview');
 
  &lt;?php } ?&gt;
&lt;/script&gt;
&lt;?php } ?&gt;</pre>
<h6>IN DETAIL</h6>
<p>In the code we:</p>
<ol>
<li>test whether the <code>data_ga</code> text setting is not empty (you could also do more validation on the format)</li>
<li>assign the <code>$ga_method</code> variable to the <code>data_ga</code> setting Universal analytics have a <code>UA-XXXX-Y</code> tracking code, while classic analytics have one more <code>X</code> in the middle. So we split the <code>data_ga</code> string in 3 parts and test if the middle part is 4 characters long. If yes, the code is universal analytics, else it is classic.</li>
<li>output the correct tracking codes from the <a href="https://developers.google.com/analytics/devguides/collection/web/">Google Analytics devguide page</a> in an <code>if else</code> clause. </li>
<li>For <em>classic</em> analytics, set <code>_gaq.push(['_setAccount', '&lt;?php get_setting('theme','data_ga'); ?&gt;']);</code>, and for <em>universal analytics</em>, set <code>ga('create', '&lt;?php get_setting('theme', 'data_ga'); ?&gt;', 'auto');</code></li>
</ol>
<h3>Social media links</h3>
<p>The following setup allows the user to:</p>
<ul>
<li>Set between 1 and 5 social media links using FontAwesome for brand icons.</li>
<li>Choose between 20+ social networks to display (if they're just text links, you could do even more).</li>
<li>Choose the ordering in which his/her social networks are displayed.</li>
</ul>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Social profile 1</td>
    <td><code>social_1</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Social profile 1 URL</td>
    <td><code>social_2_url</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Social profile 2</td>
    <td><code>social_2</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Social profile 2 URL</td>
    <td><code>social_2_url</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Social profile 3</td>
    <td><code>social_3</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Social profile 3 URL</td>
    <td><code>social_3_url</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Social profile 4</td>
    <td><code>social_4</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Social profile 4 URL</td>
    <td><code>social_4_url</code></td>
    <td><code>text</code></td>
  </tr>
  <tr>
    <td>Social profile 5</td>
    <td><code>social_5</code></td>
    <td><code>select</code></td>
  </tr>
  <tr>
    <td>Social profile 5 URL</td>
    <td><code>social_5_url</code></td>
    <td><code>text</code></td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>If your theme includes fixed social media providers (Facebook, Twitter, Google+ for example), you could simply use <code>text</code> settings for each one. But if you want to give the webmaster the <em>possiblility to choose the display order</em> of the social media, and give him/her more social media options, read on =). In this approach, there are 2 settings per social button: <code>social_x</code> defines which social network to choose for profile x, <code>social_x_url</code> holds the link. Basically every <code>social_x</code> <code>select</code> setting has +- 20 of the <a href="http://fortawesome.github.io/Font-Awesome/icons/#brand">FontAwesome brand icons</a> as options, and an extra option 'None'.
You might want to read up on PHP <a href="http://php.net/manual/en/control-structures.for.php">for loops</a> and <a href="http://php.net/manual/en/control-structures.if.php">conditional if</a> if you're not familiar.</p>
<pre>&lt;?php $social_opts = return_setting('theme', 'social_1', 'options'); 
?&gt;
&lt;nav id=&quot;profile-social&quot;&gt;
  &lt;?php for ($si = 1; $si &lt; 6; $si++) {  
  if (return_setting('theme', 'social_' . $si) && return_setting('theme', 'social_' . $si . '_url')) { ?&gt;
  &lt;a href=&quot;&lt;?php get_setting('theme', 'social_' . $si . '_url'); ?&gt;&quot;&gt;
    &lt;i class=&quot;fa fa-fw fa-&lt;?php echo strtolower($social_opts[return_setting('theme', 'social_' . $si)]); ?&gt;&quot;&gt;&lt;/i&gt;
  &lt;/a&gt;
  &lt;?php } } ?&gt;
&lt;/nav&gt;</pre>
<h6>IN DETAIL</h6>
<p>In the code, we:</p>
<ol>
<li>assign the <code>options</code> from the first select setting to the PHP variable <code>$social_opts</code>. They are all the same for the 5 settings so it doesn't matter which one.</li>
<li>create a <code>for</code> loop starting from <strong>1</strong> because the first link is <code>social_1</code> and not <code>social_0</code>, and ending at <strong>6</strong> because there can be max. 5 social links in our theme and <strong>6-1 = 5</strong>.</li>
<li>
Inside the <code>for</code> loop, we check with <code>if</code> with: 
<ol>
<li><code>return_setting('theme', 'social_' . $si)</code> if the value of the <code>select</code> is not 0 (='None')</li>
<li><code>return_setting('theme', 'social_' . $si . '_url')</code> if the value of the <code>text</code> (link) is not empty.</li>
</ol>
</li>
<li>output the link in the <code>href</code> attribute, and the name of the social network as <code>fa-&lt;name&gt;</code> (for fontAwesome) <code>&lt;?php echo strtolower($social&#95;opts[return&#95;setting('theme', 'social_' . $si)]); ?&gt;</code> <br><code>strtolower</code> simply converts eg 'Facebook' to 'facebook', and <code>$social_opts</code> is a numeric array, while <code>return_setting('theme', 'social_' . $si)</code> is an index, so doing the above is the same as <code>$social_opts[x]</code> which holds the name of a social network. </li>
</ol>
<h3>Meta: date format - hidden settings for key-value pairs</h3>
<p>The following code allows the user to:</p>
<ul>
<li>Set Google Analytics (both classic and universal account types) from the UI with the GA ID.</li>
<li>Set the Disqus comment system on blog pages.</li>
</ul>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
    <th>Access</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Blogpost date format</td>
    <td><code>blog_date</code></td>
    <td><code>select</code></td>
    <td>Normal</td>
  </tr>
  <tr>
    <td>Blogpost date values</td>
    <td><code>blog_date_fm</code></td>
    <td><code>select</code></td>
    <td>Hidden</td>
  </tr>
 </tbody>
</table>
<h6>DISCUSSION</h6>
<p>PHP date formats are somewhat hard to understand for non-technical people. They probably don't understand <code>F jS Y</code> as a date. Sometimes you want the <em>options displayed in the UI to return a different output associated with that option</em>. For text settings/ settings with limited options it's easy enough to do, but for 15+ options you might need <strong>key - value</strong> pairs. You could do this in a PHP array but you would be polluting your template. There's a 'hack' around it in GS Custom Settings: create two <code>select</code> settings, - one for the display and one for the return data (hidden access) -, with <em>the same options in the same order</em>.</p>
<pre>&lt;?php $date_fm_opts = return_setting('theme', 'blog_date_fm', 'options');
      $date_ui = return_setting('theme','blog_date');
 // JFYI $item->creDate is set from a call in return_i18n_search_results
 echo date($date_fm_opts[$date_ui], $item->creDate); ?></pre>
<h6>IN DETAIL</h6>
<p>In the code we:</p>
<ol>
<li>return the options (an array) from the hidden <code>blog_date_fm</code> setting and assign it to <code>$date_fm_opts</code>.</li>
<li>return the value (an index) from the <code>blog_date</code> setting and assign it to <code>$date-ui</code></li>
<li>Because <code>blog_date</code> and <code>blog_date_fm</code> have the same options in the same order, we can get the value from <code>blog_date</code> and retrieve the correct return value from <code>blog_date_fm</code> by doing <code>$date_fm_opts[$date_ui]</code>.</li>
</ol>
<h3>Data: Setting a maintenance mode page</h3>
<p>The following setup allows the user to:</p>
<ul>
<li>Toggle on a custom maintenance page</li>
<li>Choose which content (HTML) to output in the maintenance page</li>
<li></li>
</ul>
<h6>SETTINGS</h6>
<table style="border-collapse: collapse;">
 <thead>
  <tr>
    <th>Label</th>
    <th>Lookup</th>
    <th>Type</th>
    <th>Access</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>Blogpost date format</td>
    <td><code>blog_date</code></td>
    <td><code>select</code></td>
    <td>Normal</td>
  </tr>
  <tr>
    <td>Blogpost date values</td>
    <td><code>blog_date_fm</code></td>
    <td><code>select</code></td>
    <td>Hidden</td>
  </tr>
 </tbody>
</table>
<pre>
&lt;
</pre>
<h6>DISCUSSION</h6>
<p>The example here is based on the <a href="">GSMaintenance plugin</a>, but simpler and more flexible.</p>
<h6>Building a popup menu</h6>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
